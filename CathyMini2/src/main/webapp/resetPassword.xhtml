<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >
    <h:body>

        <ui:composition template="template/commonLayout.xhtml">
            <ui:param name="ngApp" value="resetPassword" />
            <ui:param name="ngController" value="resetPasswordCtrl" />
            <ui:param name="title" value="CathyMini - Changement de mot de passe" />
            <ui:define name="content">
                <div class="row" style="text-align: center;">
                    <div class="resetPasswordPanel col-xs-6">
                        <div style="border-bottom: solid 1px #95a5a6; margin-bottom: 15px;">
                            <h4>Changement de votre mot de passe</h4>
                        </div>
                        <div ng-show="error" class="alert alert-danger">
                            {{error}}
                        </div>
                        <div ng-show="success" class="alert alert-info">
                            {{success}}<br/>
                            <a class="btn btn-primary" href="/" alt="Retourner sur la page d'accueil">Retourner sur la page d'accueil</a>
                        </div>
                        <form ng-hide="success" name="form" class="form-horizontal" novalidate="novalidate">
                            <fieldset class="connectionModal">
                                <div class="form-group">
                                    <label >Mot de passe *</label>
                                    <input id="newPwd" name="password" ng-model="resetForm.pwd" type="password" placeholder="Entrez votre mot de passe"
                                           autofocus="autofocus" required="required" />   
                                    <div ng-show="and(form.password.$error.required, form.password.$dirty)" class="error-form">
                                        Ce champ est requis.
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label >Confirmation du mot de passe *</label>
                                    <input name="confirmPassword" ng-model="resetForm.confirmPwd" type="password" placeholder="Entrez votre mot de passe"
                                           autofocus="autofocus" required="required" pw-check="newPwd"/>   
                                    <div ng-show="and(form.confirmPassword.$error.required, form.confirmPassword.$dirty)" class="error-form">
                                        Ce champ est requis.
                                    </div>
                                    <div ng-show="and(form.confirmPassword.$error.pwmatch, form.confirmPassword.$dirty)" class="error-form">
                                        Les deux mots de passe ne correspondent pas.
                                    </div>
                                </div>
                            </fieldset>
                            <button class="btn btn-primary" ng-disabled="form.$invalid" ng-click="resetPassword()">Changer mon mot de passe</button>
                        </form>
                    </div>
                </div>
            </ui:define>
            <ui:define name="scripts">
                <script src="/assets/js/modules/resetPasswordModule.js"></script>
                <script src="/assets/js/controllers/resetPasswordCtrl.js"></script>
                <script src="/assets/js/directives/form/formDirective.js"></script>
            </ui:define>
        </ui:composition>
    </h:body>
</html>