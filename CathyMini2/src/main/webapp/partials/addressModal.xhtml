<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <body>
        <ui:composition>
            <ui:decorate template="/template/modalLayout.xhtml">
                <ui:param name="modalId" value="addressModal" />
                <ui:param name="modalTitle" value="{{modal.title}}" />
                <ui:param name="okAction" value="modal.action()" />
                <ui:param name="okLabel" value="{{modal.okLabel}}" />
                <ui:param name="ngDisabled" value="form.$invalid" />
                <ui:define name="modalContent">
                    <div ng-show="modal.displayError" class="alert alert-dismissable alert-danger">
                        <button type="button" class="close" data-dismiss="alert">×</button>
                        <strong>{{modal.error.title}}</strong> {{modal.error.text}}
                    </div>
                    <form name="form" class="form-horizontal" novalidate="novalidate">
                        <fieldset class="addressModal">
                            <div class="form-group">
                                <label>Nom *</label>
                                <input name="lastname" ng-model="modal.address.lastname" type="text"
                                       autofocus="autofocus" required="required"/>
                                <div ng-show="and(form.lastname.$error.required, form.lastname.$dirty)" class="error-form">
                                    Ce champ est requis.
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Prenom *</label>
                                <input name="firstname" ng-model="modal.address.firstname" type="text"
                                       autofocus="autofocus" required="required"/>
                                <div ng-show="and(form.firstname.$error.required, form.firstname.$dirty)" class="error-form">
                                    Ce champ est requis.
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Adresse *</label>
                                <input name="address" ng-model="modal.address.address" type="text"
                                       autofocus="autofocus" required="required"/>
                                <div ng-show="and(form.address.$error.required, form.address.$dirty)" class="error-form">
                                    Ce champ est requis.
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Code postal *</label>
                                <input name="zipCode" ng-model="modal.address.zipCode" type="number"
                                       autofocus="autofocus" required="required" ng-minlength="5" ng-maxlength="5"/>  
                                <div ng-show="and(form.zipCode.$error.required, form.zipCode.$dirty)" class="error-form">
                                    Ce champ est requis.
                                </div>
                                <div ng-show="or(form.zipCode.$error.minlength, form.zipCode.$error.maxlength)" class="error-form">
                                    Le code postal doit être composé de 5 chiffres.
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Ville *</label>
                                <input name="city" ng-model="modal.address.city" type="text"
                                       autofocus="autofocus" required="required" /> 
                                <div ng-show="and(form.city.$error.required, form.city.$dirty)" class="error-form">
                                    Ce champ est requis.
                                </div>
                                <div ng-repeat="city in modal.address.cities">
                                    {{city}}
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Pays *</label>
                                <input name="country" ng-model="modal.address.country" type="text"
                                       autofocus="autofocus" required="required"/>
                                <div ng-show="and(form.country.$error.required, form.country.$dirty)" class="error-form">
                                    Ce champ est requis.
                                </div>
                            </div>
                        </fieldset>
                    </form>
                    <p class="notice-require">Tous les champs sont requis avant de pouvoir valider le formulaire.</p>
                </ui:define>
            </ui:decorate>
        </ui:composition>
    </body>
</html>
