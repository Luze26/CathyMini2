<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <body>
        <ui:composition>
            <ui:decorate template="/template/modalLayout.xhtml">           
                <ui:param name="modalTitle" value="Inscription" />
                <ui:param name="ngCtrl" value="subscribeModalCtrl" />
                <ui:param name="modalId" value="subscribeModal" />
                <ui:param name="okAction" value="subscribe()" />
                <ui:param name="okLabel" value="S'inscrire" />
                <ui:param name="ngDisabled" value="form.$invalid" />
                <ui:define name="modalContent">
                    <div ng-show="error" class="alert alert-danger">
                        {{error}}
                    </div>
                    <form name="form" class="form-horizontal" novalidate="novalidate">
                        <fieldset class="subscribeModal">
                            <div class="form-group">
                                <label>Nom *</label>
                                <input name="username" ng-model="subscriber.username" type="text" placeholder="Entrez votre nom"
                                       autofocus="autofocus" required="required" name-check="name-check" ng-change="nameError = false"/>
                                <div ng-show="and(form.username.$error.required, form.username.$dirty)" class="error-form">
                                    Ce champ est requis.
                                </div>
                                <div ng-show="form.username.$error.usernameNotUnique" class="error-form">
                                    Ce nom est déjà utilisé, merci d'en choisir un autre.
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Adresse e-mail *</label>
                                <input name="mail" ng-model="subscriber.mail" type="email" placeholder="Quelle est votre adresse e-mail ?"
                                       autofocus="autofocus" required="required" mail-check="mail-check" ng-change="mailError = false"/>
                                <div ng-show="and(form.mail.$error.required, form.mail.$dirty)" class="error-form">
                                    Ce champ est requis.
                                </div>
                                <div ng-show="form.mail.$error.email" class="error-form">
                                    Ça ne ressemble pas à une adresse e-mail valide !
                                </div>
                                <div ng-show="form.mail.$error.mailNotUnique" class="error-form">
                                    Cette adresse e-mail est déjà utilisée, merci d'en choisir une autre.
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Mot de passe *</label>
                                <input name="password" id="pwd" ng-model="subscriber.pwd" type="password" placeholder="Entrez votre mot de passe, 6 caractères minimum"
                                       autofocus="autofocus" required="required" ng-minlength="6" />
                                <div ng-show="and(form.password.$error.required, form.password.$dirty)" class="error-form">
                                    Ce champ est requis.
                                </div>
                                <div ng-show="form.password.$error.minlength" class="error-form">
                                    Votre mot de passe est trop court, 6 caractères minimum, soyez malin !
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Confirmation du mot de passe *</label>
                                <input name="confirmPassword" ng-model="subscriber.confirmPwd" type="password" placeholder="Retaper votre mot de passe"
                                       autofocus="autofocus" required="required" ng-minlength="6" pw-check="pwd"/>
                                <div ng-show="and(form.confirmPassword.$error.required, form.confirmPassword.$dirty)" class="error-form">
                                    Ce champ est requis.
                                </div>
                                <div ng-show="and(form.confirmPassword.$error.pwmatch, form.confirmPassword.$dirty)" class="error-form">
                                    Les deux mots de passe ne correspondent pas.
                                </div>
                            </div>
                            <div class="form-group">
                                En m'inscrivant, je déclare avoir lu et accepté les <a href="/CGU.xhtml" title="CGU">conditions générales d'utilisation</a>.
                            </div>
                        </fieldset>
                    </form>
                    <p class="notice-require">Tous les champs sont requis avant de pouvoir valider le formulaire.</p>
                </ui:define>
            </ui:decorate>
        </ui:composition>
    </body>
</html>