<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      ng-app="#{ngApp}">

    <h:head>
        <title>#{title}</title>
        <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet"/>
        <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css"></link>
        <link rel="stylesheet" type="text/css" href="/assets/css/main.css"></link>
    </h:head>
 
    <body ng-controller="#{ngController}">

	<div id="page">
 
	    <div id="header">
		<ui:insert name="header" >
		  <ui:include src="/template/header.xhtml" />
		</ui:insert>
	    </div>
 
	    <div id="content" class="container">
	  	<ui:insert name="content" >
	   	</ui:insert>
	    </div>
 
	    <div id="footer">
	    	<ui:insert name="footer" >
	    	  <ui:include src="/template/footer.xhtml" />
	    	</ui:insert>
    	    </div>
 
        </div>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.1/jquery.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0-rc.3/angular.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.2/js/bootstrap.min.js"></script>
        <script src="/assets/js/modules/commonModule.js"></script>
        <script src="/assets/js/controllers/consumerCtrls.js"></script>       
        <ui:insert name="scripts" >
        </ui:insert>

        <ui:decorate template="modalLayout.xhtml">
            <ui:param name="modalId" value="connectModal" />
            <ui:param name="modalTitle" value="Se connecter" />
            <ui:param name="ngCtrl" value="subscribeModalCtrl" />
            <ui:param name="okAction" value="connect()" />
            <ui:param name="ngDisabled" value="form.$invalid" />
            <ui:define name="modalContent">
                <div ng-show="modal.displayConnectionError" class="alert alert-dismissable alert-danger">
                    <button type="button" class="close" data-dismiss="alert">×</button>
                    <strong>Connection error!</strong> Verify your internet connection.
                </div>
                <form name="form" novalidate="novalidate">
                    <fieldset>
                        <label>Username</label>
                        <input name="username" ng-model="suscriber.username" type="text" placeholder="Your username" autofocus="autofocus" required="required" />
                        <label>Mail</label>
                        <input name="mail" ng-model="suscriber.mail" type="text" placeholder="Your mail address" autofocus="autofocus" required="required" />
                        <label>Password</label>
                        <input name="password" ng-model="suscriber.pwd" type="text" placeholder="Your password" autofocus="autofocus" required="required" />                          
                    </fieldset>
                </form>
                <div ng-show="feedbackKo.display" class="alert alert-dismissable alert-danger">
                    <strong>{{feedbackKo.text}}</strong>
                </div>
            </ui:define>
        </ui:decorate>
        <ui:decorate template="modalLayout.xhtml">
            <ui:param name="modalTitle" value="S'inscire" />
            <ui:param name="ngCtrl" value="subscribeModalCtrl" />
            <ui:param name="modalId" value="subscribeModal" />
            <ui:param name="okAction" value="subscribe()" />
            <ui:param name="ngDisabled" value="form.$invalid" />
            <ui:define name="modalContent">
                <div ng-show="modal.displayConnectionError" class="alert alert-dismissable alert-danger">
                    <button type="button" class="close" data-dismiss="alert">×</button>
                    <strong>Connection error!</strong> Verify your internet connection.
                </div>
                <form name="form" novalidate="novalidate">
                    <fieldset>
                        <label>Username or Mail</label>
                        <input name="username" ng-model="consumer.user" type="text" placeholder="Your username" autofocus="autofocus" required="required" />
                        <label>Password</label>
                        <input name="password" ng-model="consumer.pwd" type="text" placeholder="Your password" autofocus="autofocus" required="required" />                          
                    </fieldset>
                </form>
                <div ng-show="feedbackKO.display" class="alert alert-dismissable alert-danger">
                    <strong>{{feedbackKO.text}}</strong>
                </div>
            </ui:define>
        </ui:decorate>
    </body>
</html>